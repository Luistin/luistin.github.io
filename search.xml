<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>test</title>
      <link href="/2025/01/16/test/"/>
      <url>/2025/01/16/test/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2025/01/16/Samba-Server/"/>
      <url>/2025/01/16/Samba-Server/</url>
      
        <content type="html"><![CDATA[<h1 id="Samba服务器的配置"><a href="#Samba服务器的配置" class="headerlink" title="Samba服务器的配置"></a>Samba服务器的配置</h1><h4 id="一、服务器介绍"><a href="#一、服务器介绍" class="headerlink" title="一、服务器介绍"></a>一、服务器介绍</h4><p>Samba是在Linux和UNIX系统上实现SMB协议的一个免费软件，由服务器及客户端程序构成。SMB（Server Messages Block，信息服务块）是一种在局域网上共享文件和打印机的一种通信协议，它为局域网内的不同计算机之间提供文件及打印机等资源的共享服务。SMB协议是客户机&#x2F;服务器型协议，客户机通过该协议可以访问服务器上的共享文件系统、打印机及其他资源。通过设置“NetBIOS over TCP&#x2F;IP”使得Samba不但能与局域网络主机分享资源，还能与全世界的电脑分享资源。</p><h4 id="二、实验环境"><a href="#二、实验环境" class="headerlink" title="二、实验环境"></a>二、实验环境</h4><table><thead><tr><th>操作系统</th><th>网络模式</th><th>IP</th></tr></thead><tbody><tr><td>服务端:openEuler</td><td>主机模式</td><td>10.203.0.3</td></tr><tr><td>客户端:openEuler</td><td>主机模式</td><td>10.203.0.4</td></tr></tbody></table><h4 id="三、实验内容"><a href="#三、实验内容" class="headerlink" title="三、实验内容"></a>三、实验内容</h4><p>1.安装Samba和Samba客户端</p><p>2.配置Samba服务端</p><p>3.配置Samba客户端来进行连接测试</p><h4 id="四、实验步骤"><a href="#四、实验步骤" class="headerlink" title="四、实验步骤"></a>四、实验步骤</h4><p>1.1：先搜索一下本地yum源里面有没有sabma</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# yum search samba</span><br><span class="line">Last metadata expiration check: 3:25:57 ago on 2024年07月13日 星期六 01时28分04秒.</span><br><span class="line">===================== Name Exactly Matched: samba ======================</span><br><span class="line">samba.x86_64 : A suite for Linux to interoperate with Windows</span><br><span class="line">==================== Name &amp; Summary Matched: samba =====================</span><br><span class="line">pcp-pmda-samba.x86_64 : Performance Co-Pilot (PCP) metrics for Samba</span><br><span class="line">samba-client.x86_64 : Client package for samba</span><br><span class="line">samba-client-libs.x86_64 : Samba client libraries</span><br><span class="line">samba-common.x86_64 : Common package for samba client and server</span><br><span class="line">samba-common-tools.x86_64 : Tools package for samba</span><br><span class="line">samba-help.x86_64 : Help package for samba</span><br><span class="line">samba-libs.x86_64 : Libraries for samba</span><br><span class="line">samba-winbind.x86_64 : The winbind package for samba</span><br><span class="line">samba-winbind-clients.x86_64 : The winbind client package for samba</span><br><span class="line">samba-winbind-modules.x86_64 : The winbind modules for samba</span><br><span class="line">======================== Summary Matched: samba ========================</span><br><span class="line">libwbclient.x86_64 : The winbind client library for samba</span><br></pre></td></tr></table></figure><p>1.2：下载samba服务和samba客户端</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# yum -y install samba-client samba</span><br><span class="line">Last metadata expiration check: 3:27:28 ago on 2024年07月13日 星期六 01时28分04秒.</span><br><span class="line"></span><br><span class="line">Dependencies resolved.</span><br><span class="line">========================================================================</span><br><span class="line"></span><br><span class="line"> Package               Arch      Version             Repository    Size</span><br><span class="line">========================================================================</span><br><span class="line"></span><br><span class="line">Installing:</span><br><span class="line"> samba                 x86_64    4.19.3-4.oe2403     openEuler    1.3 M</span><br><span class="line"> samba-client          x86_64    4.19.3-4.oe2403     openEuler    520 k</span><br><span class="line">Installing dependencies:</span><br><span class="line"> samba-common-tools    x86_64    4.19.3-4.oe2403     openEuler    391 k</span><br><span class="line"> samba-libs            x86_64    4.19.3-4.oe2403     openEuler     99 k</span><br><span class="line"></span><br><span class="line">Transaction Summary</span><br><span class="line">========================================================================</span><br><span class="line"></span><br><span class="line">Install  4 Packages</span><br><span class="line"></span><br><span class="line">Total size: 2.3 M</span><br><span class="line">Installed size: 9.5 M</span><br><span class="line">Downloading Packages:</span><br><span class="line">Running transaction check</span><br><span class="line">Transaction check succeeded.</span><br><span class="line">Running transaction test</span><br><span class="line">Transaction test succeeded.</span><br><span class="line">Running transaction</span><br><span class="line">  Preparing        :                                                1/1 </span><br><span class="line">  Installing       : samba-libs-4.19.3-4.oe2403.x86_64              1/4 </span><br><span class="line">  Installing       : samba-common-tools-4.19.3-4.oe2403.x86_64      2/4 </span><br><span class="line">  Installing       : samba-4.19.3-4.oe2403.x86_64                   3/4 </span><br><span class="line">  Running scriptlet: samba-4.19.3-4.oe2403.x86_64                   3/4 </span><br><span class="line">  Installing       : samba-client-4.19.3-4.oe2403.x86_64            4/4 </span><br><span class="line">  Running scriptlet: samba-client-4.19.3-4.oe2403.x86_64            4/4 </span><br><span class="line">  Running scriptlet: samba-4.19.3-4.oe2403.x86_64                   4/4 </span><br><span class="line">  Running scriptlet: samba-client-4.19.3-4.oe2403.x86_64            4/4 </span><br><span class="line">  Verifying        : samba-4.19.3-4.oe2403.x86_64                   1/4 </span><br><span class="line">  Verifying        : samba-client-4.19.3-4.oe2403.x86_64            2/4 </span><br><span class="line">  Verifying        : samba-common-tools-4.19.3-4.oe2403.x86_64      3/4 </span><br><span class="line">  Verifying        : samba-libs-4.19.3-4.oe2403.x86_64              4/4 </span><br><span class="line"></span><br><span class="line">Installed:</span><br><span class="line">  samba-4.19.3-4.oe2403.x86_64                                          </span><br><span class="line">  samba-client-4.19.3-4.oe2403.x86_64                                   </span><br><span class="line">  samba-common-tools-4.19.3-4.oe2403.x86_64                             </span><br><span class="line">  samba-libs-4.19.3-4.oe2403.x86_64                                     </span><br><span class="line"></span><br><span class="line">Complete!</span><br></pre></td></tr></table></figure><p>2.1：要配置Samba之前我们先了解一下Samba配置参数，因为在这个服务器中参数是最复杂的</p><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>[global]</td><td>全局设置段，影响整个 Samba 服务器的配置</td></tr><tr><td>workgroup &#x3D; WORKGROUP</td><td>设置 Samba 服务器的工作组名称，通常与你的 Windows 网络工作组相匹配</td></tr><tr><td>server string &#x3D; %h server (Samba, Ubuntu)</td><td>定义 Samba 服务器在 Windows 网络中显示的名称或描述</td></tr><tr><td>security &#x3D; user</td><td>设置 Samba 服务器的安全等级。常用的有 user（用户级认证）、share（共享级，无需认证）等</td></tr><tr><td>passdb backend &#x3D; tdbsam</td><td>指定用于存储用户密码的后端。tdbsam 是最常用的选项，使用 Samba 自带的 tdb 数据库</td></tr><tr><td>encrypt passwords &#x3D; yes</td><td>启用密码加密，建议使用以增强安全性</td></tr><tr><td>smb passwd file &#x3D; &#x2F;etc&#x2F;samba&#x2F;smbpasswd</td><td>指定 Samba 用户密码文件的存储位置</td></tr><tr><td>load printers &#x3D; yes</td><td>是否加载打印机共享，设置为 yes 时允许通过 Samba 共享打印机</td></tr><tr><td>cups options &#x3D; raw</td><td>当加载打印机共享时，指定 CUPS（通用 UNIX 打印系统）的打印选项</td></tr><tr><td>guest account &#x3D; nobody</td><td>设置匿名访问（guest）时使用的 UNIX 用户账号</td></tr><tr><td>max log size &#x3D; 1000</td><td>设置日志文件的最大大小（KB），达到此大小时将自动轮转</td></tr><tr><td>syslog &#x3D; 0</td><td>控制是否将 Samba 的日志消息发送到 syslog。0 表示不发送，1 表示发送</td></tr><tr><td>[share]</td><td>共享资源段，每个共享资源都需要一个独立的段</td></tr><tr><td>path &#x3D; &#x2F;srv&#x2F;samba&#x2F;share</td><td>设置共享资源的实际文件系统路径</td></tr><tr><td>read only &#x3D; no</td><td>设置共享资源是否为只读。yes 为只读，no 为可读写</td></tr><tr><td>browsable &#x3D; yes</td><td>设置共享资源是否可以被浏览（在文件管理器中可见）。yes 为可浏览，no 为隐藏</td></tr><tr><td>writable &#x3D; yes</td><td>设置共享资源是否可写（与 read only 相反，但更具体地控制写权限）</td></tr><tr><td>valid users &#x3D; @smbgroup</td><td>设置可以访问共享资源的用户或用户组。@ 符号用于指定用户组</td></tr><tr><td>create mask &#x3D; 0755</td><td>设置新创建文件和目录的 UNIX 权限（对于用户创建的文件）</td></tr><tr><td>directory mask &#x3D; 0755</td><td>设置新创建目录的 UNIX 权限</td></tr></tbody></table><p>  2.2：进到主配置文件中配置samba服务器，  smb,conf是samba的主配置文件，可以在里面设置samba服务器的一些参数，比如只有哪个用户或用户组可以访问哪个目录之类的                                                                                                                                                                                                                                                                                                                                                                                        </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost samba]# vi smb.conf</span><br><span class="line">[global]</span><br><span class="line">        workgroup = SAMBA</span><br><span class="line">        security = user</span><br><span class="line"></span><br><span class="line">        passdb backend = tdbsam</span><br><span class="line"></span><br><span class="line">        printing = cups</span><br><span class="line">        printcap name = cups</span><br><span class="line">        load printers = yes</span><br><span class="line">        cups options = raw</span><br><span class="line"></span><br><span class="line">        include = /etc/samba/usershares.conf</span><br><span class="line">[homes]</span><br><span class="line">        comment = Home Directories</span><br><span class="line">        valid users = %S, %D%w%S</span><br><span class="line">        browseable = No</span><br><span class="line">        read only = No</span><br><span class="line">        inherit acls = Yes</span><br><span class="line"></span><br><span class="line">[printers]</span><br><span class="line">        comment = All Printers</span><br><span class="line">        path = /var/tmp</span><br><span class="line">        printable = Yes</span><br><span class="line">        create mask = 0600</span><br><span class="line">        browseable = No</span><br><span class="line"></span><br><span class="line">[print$]</span><br><span class="line">        comment = Printer Drivers</span><br><span class="line">        path = /var/lib/samba/drivers</span><br><span class="line">        write list = @printadmin root</span><br><span class="line">        force group = @printadmin</span><br><span class="line">        create mask = 0664</span><br><span class="line">        directory mask = 0775</span><br></pre></td></tr></table></figure><p> 2.3：开启samba服务器，并设为开机自启</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost samba]# systemctl start smb</span><br><span class="line">[root@localhost samba]# systemctl enable smb</span><br><span class="line">Created symlink /etc/systemd/system/multi-user.target.wants/smb.service → /usr/lib/systemd/system/smb.service.</span><br></pre></td></tr></table></figure><p>2.4：备份samba的主配置文件，因为后面会对此文件进行修改，报错之后乱以找到错误，可以方便对照观察或还原</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]# cd /etc/samba</span><br><span class="line">[root@localhost samba]# cp /etc/samba/smb.conf /etc/samba smb.conf.bak</span><br><span class="line">[root@localhost samba]# ls</span><br><span class="line">lmhosts  smb.conf  smb.conf.bak  smb.conf.example</span><br></pre></td></tr></table></figure><p>2.5：任务要求是创建三个Samba用户，分别是samba1，samba2，samba3，三个用户都可以浏览共享目录&#x2F;share&#x2F;，test1和test2可以写入文件共享目录</p><p>2.6：首先我们先创建samba需要共享的目录&#x2F;share</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# mkdir /share</span><br></pre></td></tr></table></figure><p>2.7：在共享目录中建立一个文件方便后面的测试，文件名设置为自己的名字</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cd /share</span><br><span class="line">[root@localhost share]# mkdir test</span><br></pre></td></tr></table></figure><p>2.8：给共享目录777的权限</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost share]# chmod 777 /share</span><br></pre></td></tr></table></figure><p>2.9：新建2.4所说是三个用户，其中samba1属于admin组，然后使用pdbedit命令查看samba用户列表</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]# groupadd sambaadmin</span><br><span class="line">[root@localhost /]# useradd -g sambaadmin samba1</span><br><span class="line">[root@localhost /]# useradd samba2</span><br><span class="line">[root@localhost /]# useradd samba3</span><br><span class="line">Failed to add entry for user samab1.</span><br><span class="line">[root@localhost /]# smbpasswd -a samba1</span><br><span class="line">New SMB password:</span><br><span class="line">Retype new SMB password:</span><br><span class="line">Added user samba1.</span><br><span class="line">[root@localhost /]# smbpasswd -a samba2</span><br><span class="line">New SMB password:</span><br><span class="line">Retype new SMB password:</span><br><span class="line">Added user samba2.</span><br><span class="line">[root@localhost /]# smbpasswd -a samba3</span><br><span class="line">New SMB password:</span><br><span class="line">Retype new SMB password:</span><br><span class="line">Added user samba3.</span><br><span class="line">[root@localhost /]# pdbedit -L</span><br><span class="line">samba1:1009:</span><br><span class="line">samba3:1011:</span><br><span class="line">samba2:1010:</span><br></pre></td></tr></table></figure><p>2.10：编辑samba主配置文件，实现三个用户都可以浏览共享目录&#x2F;share&#x2F;，test1和test2可以写入文件共享目录，在最下面追加[share]的内容即可</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost samba]# vi smb.conf</span><br><span class="line">[share]</span><br><span class="line">        path = /share</span><br><span class="line">        browseable = yes</span><br><span class="line">        write list = @sambaadmin,samba2</span><br><span class="line">        hosts allow = 10.203.0.0/24</span><br></pre></td></tr></table></figure><p>2.11：重启samba服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost samba]# systemctl restart smb</span><br></pre></td></tr></table></figure><p>2.12：关闭Selinux</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost samba]# setenforce 0</span><br><span class="line">setenforce: SELinux is disabled</span><br></pre></td></tr></table></figure><p>3.1：目前开始使用客户端进行测试，主要是测试Samba服务器的权限是否配置好了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ip a</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host noprefixroute </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000</span><br><span class="line">    link/ether 00:0c:29:41:78:e7 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 10.203.0.4/24 brd 10.203.0.255 scope global noprefixroute ens33</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::20c:29ff:fe41:78e7/64 scope link noprefixroute </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure><p>3.2： 安装samba的客户端程序，由于没有重启之后没有挂载本地镜像，所以挂载之后再进行下载</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# mount /dev/cdrom /media/cdrom/</span><br><span class="line">mount: /media/cdrom: WARNING: source write-protected, mounted read-only.</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# yum -y install samba-client</span><br><span class="line">Last metadata expiration check: 0:00:07 ago on 2024年08月21日 星期三 14时43分23秒.</span><br><span class="line"></span><br><span class="line">Dependencies resolved.</span><br><span class="line">===================================================================================</span><br><span class="line"></span><br><span class="line"> Package             Architecture  Version                  Repository        Size</span><br><span class="line">===================================================================================</span><br><span class="line"></span><br><span class="line">Installing:</span><br><span class="line"> samba-client        x86_64        4.19.3-4.oe2403          openEuler        520 k</span><br><span class="line"></span><br><span class="line">Transaction Summary</span><br><span class="line">===================================================================================</span><br><span class="line"></span><br><span class="line">Install  1 Package</span><br><span class="line"></span><br><span class="line">Total size: 520 k</span><br><span class="line">Installed size: 2.3 M</span><br><span class="line">Downloading Packages:</span><br><span class="line">Running transaction check</span><br><span class="line">Transaction check succeeded.</span><br><span class="line">Running transaction test</span><br><span class="line">Transaction test succeeded.</span><br><span class="line">Running transaction</span><br><span class="line">  Preparing        :                                                           1/1 </span><br><span class="line">  Installing       : samba-client-4.19.3-4.oe2403.x86_64                       1/1 </span><br><span class="line">  Running scriptlet: samba-client-4.19.3-4.oe2403.x86_64                       1/1 </span><br><span class="line">  Verifying        : samba-client-4.19.3-4.oe2403.x86_64                       1/1 </span><br><span class="line"></span><br><span class="line">Installed:</span><br><span class="line">  samba-client-4.19.3-4.oe2403.x86_64                                              </span><br><span class="line"></span><br><span class="line">Complete!</span><br></pre></td></tr></table></figure><p>3.3：使用Samba的smbclient来进行登录测试，测试samba1账号，密码是test</p><pre><code>[root@localhost ~]# smbclient -L //10.203.0.3 -U samba1%test  Sharename       Type      Comment    ---------       ----      -------    print$          Disk      Printer Drivers    share           Disk          IPC$            IPC       IPC Service (Samba 4.19.3)    samba1          Disk      Home DirectoriesSMB1 disabled -- no workgroup available    </code></pre><p>3.4：使用samba1登录进共享目录查看是否可以登录，测试可以登录并且可以查看当前目录下有什么文件，测试一下是否可以新建文件，经过测试是可以的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# smbclient //10.203.0.3/share -U samba1</span><br><span class="line">Password for [SAMBA\samba1]:</span><br><span class="line">Try &quot;help&quot; to get a list of possible commands.</span><br><span class="line">smb: \&gt; ls</span><br><span class="line">  .                                   D        0  Wed Aug 21 10:21:15 2024</span><br><span class="line">  ..                                  D        0  Wed Aug 21 10:21:15 2024</span><br><span class="line">  test                                D        0  Wed Aug 21 10:21:15 2024</span><br><span class="line"></span><br><span class="line">            37884476 blocks of size 1024. 33065628 blocks available</span><br><span class="line">smb: \&gt; mkdir samba1test</span><br><span class="line">smb: \&gt; ls</span><br><span class="line">  .                                   D        0  Wed Aug 21 14:52:37 2024</span><br><span class="line">  ..                                  D        0  Wed Aug 21 14:52:37 2024</span><br><span class="line">  test                                D        0  Wed Aug 21 10:21:15 2024</span><br><span class="line">  samba1test                          D        0  Wed Aug 21 14:52:37 2024</span><br><span class="line"></span><br><span class="line">                37884476 blocks of size 1024. 33065624 blocks available</span><br></pre></td></tr></table></figure><p>3.5：分别测试samba2是否可以达到和samba1一样的权限，samba3是否无法创建文件（目录），首先测试samba2，是可以新建文件的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# smbclient //10.203.0.3/share -U samba2</span><br><span class="line">Password for [SAMBA\samba2]:</span><br><span class="line">Try &quot;help&quot; to get a list of possible commands.</span><br><span class="line">smb: \&gt; mkdir samba2test</span><br><span class="line">smb: \&gt; ls</span><br><span class="line">  .                                   D        0  Wed Aug 21 14:55:06 2024</span><br><span class="line">  ..                                  D        0  Wed Aug 21 14:55:06 2024</span><br><span class="line">  test                                D        0  Wed Aug 21 10:21:15 2024</span><br><span class="line">  samba1test                          D        0  Wed Aug 21 14:52:37 2024</span><br><span class="line">  samba2test                          D        0  Wed Aug 21 14:55:06 2024</span><br><span class="line"></span><br><span class="line">           37884476 blocks of size 1024. 33065636 blocks available</span><br></pre></td></tr></table></figure><p>3.6：测试samba3，可以发现无法新建文件，以上实验成功</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# smbclient //10.203.0.3/share -U samba3</span><br><span class="line">Password for [SAMBA\samba3]:</span><br><span class="line">Try &quot;help&quot; to get a list of possible commands.</span><br><span class="line">smb: \&gt; mkdir samba3test</span><br><span class="line">NT_STATUS_ACCESS_DENIED making remote directory \samba3test</span><br><span class="line">smb: \&gt; ls</span><br><span class="line">  .                                   D        0  Wed Aug 21 14:55:06 2024</span><br><span class="line">  ..                                  D        0  Wed Aug 21 14:55:06 2024</span><br><span class="line">  test                                D        0  Wed Aug 21 10:21:15 2024</span><br><span class="line">  samba1test                          D        0  Wed Aug 21 14:52:37 2024</span><br><span class="line">  samba2test                          D        0  Wed Aug 21 14:55:06 2024</span><br><span class="line"></span><br><span class="line">            37884476 blocks of size 1024. 33065632 blocks available</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
