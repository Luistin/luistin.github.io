<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title></title>
  
  
  <link href="https://luistin.github.io/atom.xml" rel="self"/>
  
  <link href="https://luistin.github.io/"/>
  <updated>2025-02-16T12:00:53.834Z</updated>
  <id>https://luistin.github.io/</id>
  
  <author>
    <name>John Doe</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>在Ubuntu 22.04上搭建DNS服务器教程</title>
    <link href="https://luistin.github.io/2025/02/16/Ubuntu22.04-DNS/"/>
    <id>https://luistin.github.io/2025/02/16/Ubuntu22.04-DNS/</id>
    <published>2025-02-15T16:00:00.000Z</published>
    <updated>2025-02-16T12:00:53.834Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-配置基础设置"><a href="#1-配置基础设置" class="headerlink" title="1. 配置基础设置"></a>1. 配置基础设置</h2><h3 id="修改主配置文件"><a href="#修改主配置文件" class="headerlink" title="修改主配置文件"></a>修改主配置文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/bind/named.conf.options</span><br></pre></td></tr></table></figure><p>在 <code>options</code> 块内添加：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">listen-on &#123; any; &#125;;</span><br><span class="line">allow-query &#123; any; &#125;;</span><br><span class="line">forwarders &#123;</span><br><span class="line">    8.8.8.8;</span><br><span class="line">    8.8.4.4;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="创建区域文件配置"><a href="#创建区域文件配置" class="headerlink" title="创建区域文件配置"></a>创建区域文件配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/bind/named.conf.local</span><br></pre></td></tr></table></figure><p>添加以下内容（根据实际需求修改）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">zone &quot;example.com&quot; &#123;</span><br><span class="line">    type master;</span><br><span class="line">    file &quot;/etc/bind/db.example.com&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">zone &quot;1.168.192.in-addr.arpa&quot; &#123;</span><br><span class="line">    type master;</span><br><span class="line">    file &quot;/etc/bind/db.192&quot;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="2-创建区域文件"><a href="#2-创建区域文件" class="headerlink" title="2. 创建区域文件"></a>2. 创建区域文件</h2><h3 id="正向解析文件"><a href="#正向解析文件" class="headerlink" title="正向解析文件"></a>正向解析文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /etc/bind/db.local /etc/bind/db.example.com</span><br><span class="line">sudo nano /etc/bind/db.example.com</span><br></pre></td></tr></table></figure><p>修改为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$TTL    86400</span><br><span class="line">@       IN      SOA     ns1.example.com. admin.example.com. (</span><br><span class="line">                  2024062001</span><br><span class="line">                  3600</span><br><span class="line">                  1800</span><br><span class="line">                  604800</span><br><span class="line">                  86400 )</span><br><span class="line">@       IN      NS      ns1.example.com.</span><br><span class="line">ns1     IN      A       192.168.1.10</span><br><span class="line">www     IN      A       192.168.1.100</span><br></pre></td></tr></table></figure><h3 id="反向解析文件"><a href="#反向解析文件" class="headerlink" title="反向解析文件"></a>反向解析文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /etc/bind/db.127 /etc/bind/db.192</span><br><span class="line">sudo nano /etc/bind/db.192</span><br></pre></td></tr></table></figure><p>修改为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$TTL    86400</span><br><span class="line">@       IN      SOA     ns1.example.com. admin.example.com. (</span><br><span class="line">                  2024062001</span><br><span class="line">                  3600</span><br><span class="line">                  1800</span><br><span class="line">                  604800</span><br><span class="line">                  86400 )</span><br><span class="line">@       IN      NS      ns1.example.com.</span><br><span class="line">10      IN      PTR     ns1.example.com.</span><br><span class="line">100     IN      PTR     www.example.com.</span><br></pre></td></tr></table></figure><h2 id="3-验证配置"><a href="#3-验证配置" class="headerlink" title="3. 验证配置"></a>3. 验证配置</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo named-checkconf</span><br><span class="line">sudo named-checkzone example.com /etc/bind/db.example.com</span><br><span class="line">sudo named-checkzone 1.168.192.in-addr.arpa /etc/bind/db.192</span><br></pre></td></tr></table></figure><h2 id="4-重启服务"><a href="#4-重启服务" class="headerlink" title="4. 重启服务"></a>4. 重启服务</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart named</span><br><span class="line">sudo systemctl enable named</span><br></pre></td></tr></table></figure><h2 id="5-防火墙配置"><a href="#5-防火墙配置" class="headerlink" title="5. 防火墙配置"></a>5. 防火墙配置</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw allow 53/tcp</span><br><span class="line">sudo ufw allow 53/udp</span><br><span class="line">sudo ufw reload</span><br></pre></td></tr></table></figure><h2 id="6-客户端测试"><a href="#6-客户端测试" class="headerlink" title="6. 客户端测试"></a>6. 客户端测试</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nslookup www.example.com 192.168.1.10</span><br><span class="line">dig -x 192.168.1.100 @192.168.1.10</span><br></pre></td></tr></table></figure><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ol><li>将示例中的 <code>192.168.1.x</code> 替换为实际 IP 地址</li><li>域名 <code>example.com</code> 需替换为实际域名</li><li>检查文件权限：<code>/etc/bind/</code> 目录应属于 <code>root:bind</code></li><li>完整日志查看：<code>tail -f /var/log/syslog | grep named</code></li></ol>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;1-配置基础设置&quot;&gt;&lt;a href=&quot;#1-配置基础设置&quot; class=&quot;headerlink&quot; title=&quot;1. 配置基础设置&quot;&gt;&lt;/a&gt;1. 配置基础设置&lt;/h2&gt;&lt;h3 id=&quot;修改主配置文件&quot;&gt;&lt;a href=&quot;#修改主配置文件&quot; class=&quot;headerlink&quot; title=&quot;修改主配置文件&quot;&gt;&lt;/a&gt;修改主配置文件&lt;/h3&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo nano /etc/bind/named.conf.options&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;在 &lt;code&gt;options&lt;/code&gt; 块内添加：&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;listen-on &amp;#123; any; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;allow-query &amp;#123; any; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;forwarders &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    8.8.8.8;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    8.8.4.4;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&quot;创建区域文件配置&quot;&gt;&lt;a href=&quot;#创建区域文件配置&quot; class=&quot;headerlink&quot; title=&quot;创建区域文件配置&quot;&gt;&lt;/a&gt;创建区域文件配置&lt;/h3&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo nano /etc/bind/named.conf.local&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;添加以下内容（根据实际需求修改）：&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;zone &amp;quot;example.com&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    type master;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    file &amp;quot;/etc/bind/db.example.com&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;zone &amp;quot;1.168.192.in-addr.arpa&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    type master;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    file &amp;quot;/etc/bind/db.192&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&quot;2-创建区域文件&quot;&gt;&lt;a href=&quot;#2-创建区域文件&quot; class=&quot;headerlink&quot; title=&quot;2. 创建区域文件&quot;&gt;&lt;/a&gt;2. 创建区域文件&lt;/h2&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>在Ubuntu 22.04上搭建Tomcat服务器</title>
    <link href="https://luistin.github.io/2025/02/16/Ubuntu22.04-Tomcat10/"/>
    <id>https://luistin.github.io/2025/02/16/Ubuntu22.04-Tomcat10/</id>
    <published>2025-02-15T16:00:00.000Z</published>
    <updated>2025-02-16T12:00:47.428Z</updated>
    
    <content type="html"><![CDATA[<p><strong>在本教程中，我们将会介绍如何在Ubuntu系统上安装和配置Tomcat。Tomcat是一个开源的Java Servlet容器，它可以用来部署Java Web应用程序。接下来，我们将一步步地完成Tomcat的安装和配置。</strong></p><h2 id="1-更新系统在开始安装之前，首先需要更新系统的包管理器和已安装的软件包。打开终端，运行以下命令："><a href="#1-更新系统在开始安装之前，首先需要更新系统的包管理器和已安装的软件包。打开终端，运行以下命令：" class="headerlink" title="1. 更新系统在开始安装之前，首先需要更新系统的包管理器和已安装的软件包。打开终端，运行以下命令："></a>1. 更新系统在开始安装之前，首先需要更新系统的包管理器和已安装的软件包。打开终端，运行以下命令：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt updatesudo </span><br><span class="line">apt upgrade -y</span><br></pre></td></tr></table></figure><h2 id="2-安装Java环境"><a href="#2-安装Java环境" class="headerlink" title="2. 安装Java环境"></a>2. 安装Java环境</h2><p>Tomcat是基于Java的，因此需要在系统中安装Java运行时环境(JRE)或Java开发工具包(JDK)。在Ubuntu中，可以通过以下命令安装OpenJDK：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install openjdk-11-jdk -y</span><br></pre></td></tr></table></figure><p>安装完成后，使用以下命令确认Java是否安装成功：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure><p>如果看到类似如下的输出，说明Java已经正确安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">openjdk version &quot;11.0.10&quot; 2021-01-19</span><br><span class="line">OpenJDK Runtime Environment (build 11.0.10+9-post-Ubuntu-0ubuntu1)</span><br><span class="line">OpenJDK 64-Bit Server VM (build 11.0.10+9-post-Ubuntu-0ubuntu1, mixed mode)</span><br></pre></td></tr></table></figure><h2 id="3-下载Tomcat"><a href="#3-下载Tomcat" class="headerlink" title="3. 下载Tomcat"></a>3. 下载Tomcat</h2><p>接下来，下载Tomcat的最新版本。可以访问Tomcat官网的下载页面 <a href="http://tomcat.apache.org/download-90.cgi">Tomcat下载页</a> 获取最新的版本，或者直接通过终端使用<code>wget</code>命令来下载。</p><p>例如，下载Tomcat 9.x：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://downloads.apache.org/tomcat/tomcat-9/v9.0.46/bin/apache-tomcat-9.0.46.tar.gz</span><br></pre></td></tr></table></figure><h2 id="4-解压Tomcat文件"><a href="#4-解压Tomcat文件" class="headerlink" title="4. 解压Tomcat文件"></a>4. 解压Tomcat文件</h2><p>下载完成后，使用以下命令解压文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xzvf apache-tomcat-9.0.46.tar.gz</span><br></pre></td></tr></table></figure><p>解压后，会在当前目录下创建一个名为<code>apache-tomcat-9.0.46</code>的文件夹。</p><h2 id="5-配置环境变量"><a href="#5-配置环境变量" class="headerlink" title="5. 配置环境变量"></a>5. 配置环境变量</h2><p>为了方便使用Tomcat，可以将Tomcat的路径添加到系统的环境变量中。编辑<code>~/.rc</code>文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano ~/.rc</span><br></pre></td></tr></table></figure><p>在文件末尾添加以下两行内容（根据实际情况修改路径）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export CATALINA_HOME=/home/your-username/apache-tomcat-9.0.46</span><br><span class="line">export PATH=$PATH:$CATALINA_HOME/bin</span><br></pre></td></tr></table></figure><p>保存并退出文件后，运行以下命令使更改生效：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.rc</span><br></pre></td></tr></table></figure><h2 id="6-启动Tomcat"><a href="#6-启动Tomcat" class="headerlink" title="6. 启动Tomcat"></a>6. 启动Tomcat</h2><p>现在，可以使用以下命令启动Tomcat：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$CATALINA_HOME/bin/startup.sh</span><br></pre></td></tr></table></figure><p>Tomcat将会在后台启动，您可以通过浏览器访问<code>http://localhost:8080</code>来查看Tomcat的默认欢迎页面。</p><h2 id="7-停止Tomcat"><a href="#7-停止Tomcat" class="headerlink" title="7. 停止Tomcat"></a>7. 停止Tomcat</h2><p>如果需要停止Tomcat，可以使用以下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$CATALINA_HOME/bin/shutdown.sh</span><br></pre></td></tr></table></figure><h2 id="8-配置Tomcat的端口"><a href="#8-配置Tomcat的端口" class="headerlink" title="8. 配置Tomcat的端口"></a>8. 配置Tomcat的端口</h2><p>默认情况下，Tomcat监听8080端口。如果您想更改Tomcat的端口，编辑<code>$CATALINA_HOME/conf/server.xml</code>文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano $CATALINA_HOME/conf/server.xml</span><br></pre></td></tr></table></figure><p>找到以下部分：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xml&lt;Connector port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot;</span><br><span class="line">           connectionTimeout=&quot;20000&quot;</span><br><span class="line">           redirectPort=&quot;8443&quot; /&gt;</span><br></pre></td></tr></table></figure><p>将<code>port=&quot;8080&quot;</code>改为您希望使用的端口号，例如<code>port=&quot;8081&quot;</code>，然后保存文件。</p><h2 id="9-设置Tomcat为系统服务（可选）"><a href="#9-设置Tomcat为系统服务（可选）" class="headerlink" title="9. 设置Tomcat为系统服务（可选）"></a>9. 设置Tomcat为系统服务（可选）</h2><p>如果您希望Tomcat在系统启动时自动启动，可以将Tomcat配置为服务。首先，创建一个名为<code>tomcat.service</code>的systemd服务文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/systemd/system/tomcat.service</span><br></pre></td></tr></table></figure><p>将以下内容复制粘贴到文件中：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Apache Tomcat Web Application Container</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">User=your-username</span><br><span class="line">Group=your-username</span><br><span class="line">Environment=JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64</span><br><span class="line">Environment=CATALINA_HOME=/home/your-username/apache-tomcat-9.0.46</span><br><span class="line">ExecStart=/home/your-username/apache-tomcat-9.0.46/bin/startup.sh</span><br><span class="line">ExecStop=/home/your-username/apache-tomcat-9.0.46/bin/shutdown.sh</span><br><span class="line">Restart=on-failure</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><p>保存并关闭文件后，运行以下命令来重新加载systemd并启用Tomcat服务：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl enable tomcat</span><br><span class="line">sudo systemctl start tomcat</span><br></pre></td></tr></table></figure><p>现在，Tomcat将会在每次启动时自动运行。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;strong&gt;在本教程中，我们将会介绍如何在Ubuntu系统上安装和配置Tomcat。Tomcat是一个开源的Java Servlet容器，它可以用来部署Java Web应用程序。接下来，我们将一步步地完成Tomcat的安装和配置。&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;1-更新系统在开始安装之前，首先需要更新系统的包管理器和已安装的软件包。打开终端，运行以下命令：&quot;&gt;&lt;a href=&quot;#1-更新系统在开始安装之前，首先需要更新系统的包管理器和已安装的软件包。打开终端，运行以下命令：&quot; class=&quot;headerlink&quot; title=&quot;1. 更新系统在开始安装之前，首先需要更新系统的包管理器和已安装的软件包。打开终端，运行以下命令：&quot;&gt;&lt;/a&gt;1. 更新系统在开始安装之前，首先需要更新系统的包管理器和已安装的软件包。打开终端，运行以下命令：&lt;/h2&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo apt updatesudo &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apt upgrade -y&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&quot;2-安装Java环境&quot;&gt;&lt;a href=&quot;#2-安装Java环境&quot; class=&quot;headerlink&quot; title=&quot;2. 安装Java环境&quot;&gt;&lt;/a&gt;2. 安装Java环境&lt;/h2&gt;&lt;p&gt;Tomcat是基于Java的，因此需要在系统中安装Java运行时环境(JRE)或Java开发工具包(JDK)。在Ubuntu中，可以通过以下命令安装OpenJDK：&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo apt install openjdk-11-jdk -y&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;安装完成后，使用以下命令确认Java是否安装成功：&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;java -version&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;如果看到类似如下的输出，说明Java已经正确安装：&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;openjdk version &amp;quot;11.0.10&amp;quot; 2021-01-19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;OpenJDK Runtime Environment (build 11.0.10+9-post-Ubuntu-0ubuntu1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;OpenJDK 64-Bit Server VM (build 11.0.10+9-post-Ubuntu-0ubuntu1, mixed mode)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>在 Ubuntu 22.04 手动搭建 vsftpd 服务器</title>
    <link href="https://luistin.github.io/2025/02/16/Ubuntu22.04-Vsftpd/"/>
    <id>https://luistin.github.io/2025/02/16/Ubuntu22.04-Vsftpd/</id>
    <published>2025-02-15T16:00:00.000Z</published>
    <updated>2025-02-16T11:59:11.467Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-安装-vsftpd-软件包"><a href="#1-安装-vsftpd-软件包" class="headerlink" title="1. 安装 vsftpd 软件包"></a>1. 安装 vsftpd 软件包</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install vsftpd -y</span><br></pre></td></tr></table></figure><h2 id="2-备份原始配置文件"><a href="#2-备份原始配置文件" class="headerlink" title="2. 备份原始配置文件"></a>2. 备份原始配置文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /etc/vsftpd.conf /etc/vsftpd.conf.bak</span><br></pre></td></tr></table></figure><h2 id="3-配置-vsftpd"><a href="#3-配置-vsftpd" class="headerlink" title="3. 配置 vsftpd"></a>3. 配置 vsftpd</h2><h3 id="修改主配置文件"><a href="#修改主配置文件" class="headerlink" title="修改主配置文件"></a>修改主配置文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/vsftpd.conf</span><br></pre></td></tr></table></figure><p>保留以下核心参数（其他参数注释或删除）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">listen=YES</span><br><span class="line">listen_ipv6=NO</span><br><span class="line">anonymous_enable=NO</span><br><span class="line">local_enable=YES</span><br><span class="line">write_enable=YES</span><br><span class="line">local_umask=022</span><br><span class="line">dirmessage_enable=YES</span><br><span class="line">use_localtime=YES</span><br><span class="line">xferlog_enable=YES</span><br><span class="line">connect_from_port_20=YES</span><br><span class="line">chroot_local_user=YES</span><br><span class="line">secure_chroot_dir=/var/run/vsftpd/empty</span><br><span class="line">pam_service_name=vsftpd</span><br><span class="line">pasv_enable=YES</span><br><span class="line">pasv_min_port=40000</span><br><span class="line">pasv_max_port=50000</span><br><span class="line">user_sub_token=$USER</span><br><span class="line">local_root=/var/ftp/$USER</span><br><span class="line">userlist_enable=YES</span><br><span class="line">userlist_file=/etc/vsftpd.userlist</span><br><span class="line">userlist_deny=NO</span><br></pre></td></tr></table></figure><h2 id="4-创建专用用户"><a href="#4-创建专用用户" class="headerlink" title="4. 创建专用用户"></a>4. 创建专用用户</h2><h3 id="创建-FTP-用户组"><a href="#创建-FTP-用户组" class="headerlink" title="创建 FTP 用户组"></a>创建 FTP 用户组</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo groupadd ftpusers</span><br></pre></td></tr></table></figure><h3 id="添加用户并设置目录"><a href="#添加用户并设置目录" class="headerlink" title="添加用户并设置目录"></a>添加用户并设置目录</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo useradd -m -g ftpusers -d /var/ftp/testuser -s /bin/ testuser</span><br><span class="line">sudo chmod 750 /var/ftp/testuser</span><br><span class="line">sudo echo &quot;testuser&quot; | sudo tee -a /etc/vsftpd.userlist</span><br><span class="line">sudo passwd testuser</span><br></pre></td></tr></table></figure><h2 id="5-调整目录权限"><a href="#5-调整目录权限" class="headerlink" title="5. 调整目录权限"></a>5. 调整目录权限</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /var/ftp</span><br><span class="line">sudo chown root:root /var/ftp</span><br><span class="line">sudo chmod 755 /var/ftp</span><br></pre></td></tr></table></figure><h2 id="6-重启服务"><a href="#6-重启服务" class="headerlink" title="6. 重启服务"></a>6. 重启服务</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart vsftpd</span><br><span class="line">sudo systemctl enable vsftpd</span><br></pre></td></tr></table></figure><h2 id="7-防火墙配置"><a href="#7-防火墙配置" class="headerlink" title="7. 防火墙配置"></a>7. 防火墙配置</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw allow 20/tcp</span><br><span class="line">sudo ufw allow 21/tcp</span><br><span class="line">sudo ufw allow 40000:50000/tcp</span><br><span class="line">sudo ufw reload</span><br></pre></td></tr></table></figure><h2 id="8-客户端测试"><a href="#8-客户端测试" class="headerlink" title="8. 客户端测试"></a>8. 客户端测试</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ftp 192.168.1.10  # 替换为服务器IP</span><br><span class="line"># 输入用户名密码测试上传/下载</span><br></pre></td></tr></table></figure><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ol><li>将示例 IP <code>192.168.1.10</code> 替换为实际服务器地址</li><li>用户 <code>testuser</code> 需按实际需求创建</li><li>被动模式端口范围 <code>40000-50000</code> 需与防火墙规则匹配</li><li>日志查看命令：<code>tail -f /var/log/vsftpd.log</code></li><li>重要文件权限要求：<ul><li><code>/etc/vsftpd.userlist</code> 应属于 <code>root:root</code></li><li>用户家目录权限不可超过 <code>750</code></li></ul></li></ol>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;1-安装-vsftpd-软件包&quot;&gt;&lt;a href=&quot;#1-安装-vsftpd-软件包&quot; class=&quot;headerlink&quot; title=&quot;1. 安装 vsftpd 软件包&quot;&gt;&lt;/a&gt;1. 安装 vsftpd 软件包&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo apt update&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo apt install vsftpd -y&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&quot;2-备份原始配置文件&quot;&gt;&lt;a href=&quot;#2-备份原始配置文件&quot; class=&quot;headerlink&quot; title=&quot;2. 备份原始配置文件&quot;&gt;&lt;/a&gt;2. 备份原始配置文件&lt;/h2&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo cp /etc/vsftpd.conf /etc/vsftpd.conf.bak&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&quot;3-配置-vsftpd&quot;&gt;&lt;a href=&quot;#3-配置-vsftpd&quot; class=&quot;headerlink&quot; title=&quot;3. 配置 vsftpd&quot;&gt;&lt;/a&gt;3. 配置 vsftpd&lt;/h2&gt;&lt;h3 id=&quot;修改主配置文件&quot;&gt;&lt;a href=&quot;#修改主配置文件&quot; class=&quot;headerlink&quot; title=&quot;修改主配置文件&quot;&gt;&lt;/a&gt;修改主配置文件&lt;/h3&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo nano /etc/vsftpd.conf&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;保留以下核心参数（其他参数注释或删除）：&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;listen=YES&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;listen_ipv6=NO&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;anonymous_enable=NO&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;local_enable=YES&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;write_enable=YES&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;local_umask=022&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dirmessage_enable=YES&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;use_localtime=YES&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;xferlog_enable=YES&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;connect_from_port_20=YES&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chroot_local_user=YES&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;secure_chroot_dir=/var/run/vsftpd/empty&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pam_service_name=vsftpd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pasv_enable=YES&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pasv_min_port=40000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pasv_max_port=50000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;user_sub_token=$USER&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;local_root=/var/ftp/$USER&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;userlist_enable=YES&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;userlist_file=/etc/vsftpd.userlist&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;userlist_deny=NO&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&quot;4-创建专用用户&quot;&gt;&lt;a href=&quot;#4-创建专用用户&quot; class=&quot;headerlink&quot; title=&quot;4. 创建专用用户&quot;&gt;&lt;/a&gt;4. 创建专用用户&lt;/h2&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>DHCP服务器的配置</title>
    <link href="https://luistin.github.io/2025/01/19/DHCP-Server/"/>
    <id>https://luistin.github.io/2025/01/19/DHCP-Server/</id>
    <published>2025-01-18T16:00:00.000Z</published>
    <updated>2025-02-16T09:45:45.406Z</updated>
    
    <content type="html"><![CDATA[<h4 id="一、服务器介绍"><a href="#一、服务器介绍" class="headerlink" title="一、服务器介绍"></a>一、服务器介绍</h4><p>动态主机配置协议 DHCP（Dynamic Host Configuration Protocol，动态主机配置协议） 是 RFC 1541（已被 RFC 2131 取代）定义的标准协议，该协议允许服务器向客户端动态分配 IP 地址和配置信息。<br>DHCP协议支持C&#x2F;S（客户端&#x2F;服务器）结构，主要分为两部分：<br>1、DHCP客户端：通常为网络中的PC、打印机等终端设备，使用从DHCP服务器分配下来的IP信息，包括IP地址、DNS等。<br>2、DHCP服务器：所有的IP网络设定信息都由DHCP服务器集中管理，并处理客户端的DHCP请求。<br>DHCP采用UDP作为传输协议，客户端发送消息到DHCP服务器的的67号端口，服务器返回消息给客户端的68号端口。</p><h4 id="二、实验环境"><a href="#二、实验环境" class="headerlink" title="二、实验环境"></a>二、实验环境</h4><table><thead><tr><th>操作系统</th><th>网络模式</th><th>系统网络模式</th><th>IP</th></tr></thead><tbody><tr><td>服务端:openEuler</td><td>主机模式</td><td>Static</td><td>10.203.0.3</td></tr><tr><td>客户端:Windows Server 2016</td><td>主机模式</td><td>DHCP</td><td>DHCP分配</td></tr></tbody></table><h4 id="三、实验内容"><a href="#三、实验内容" class="headerlink" title="三、实验内容"></a>三、实验内容</h4><p>1.下载DHCP服务</p><p>2.网络环境的配置</p><p>3.DHCP服务的配置</p><h4 id="四、实验步骤"><a href="#四、实验步骤" class="headerlink" title="四、实验步骤"></a>四、实验步骤</h4><p>1.1：下载DHCP服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# yum -y install dhcp-server</span><br><span class="line">Last metadata expiration check: 2:18:33 ago on 2024年07月08日 星期一 12时06分46秒.</span><br><span class="line">Package dhcp-12:4.4.3-7.oe2403.x86_64 is already installed.</span><br><span class="line">Dependencies resolved.</span><br><span class="line">Nothing to do.</span><br><span class="line">Complete!</span><br></pre></td></tr></table></figure><p>1.2：配置DHCP服务器，先找到主配置文件，一开始在配置文件会告诉我们模版在哪里</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cd /etc/dhcp/</span><br><span class="line">[root@localhost dhcp]# ls -al</span><br><span class="line">总计 32</span><br><span class="line">drwxr-x---.  3 root root  4096  7月 8日 14:28 .</span><br><span class="line">drwxr-xr-x. 89 root root 12288  7月 8日 08:52 ..</span><br><span class="line">drwxr-xr-x.  2 root root  4096  6月30日 13:11 dhclient.d</span><br><span class="line">-rw-r--r--.  1 root root   126  5月23日 20:51 dhcpd6.conf</span><br><span class="line">-rw-r--r--.  1 root root   123  5月23日 20:51 dhcpd.conf</span><br><span class="line">-rw-r--r--.  1 root root  4096  7月 8日 14:28 .dhcpd.conf.swp</span><br><span class="line">[root@localhost dhcp]# cat dhcpd.conf </span><br><span class="line">#</span><br><span class="line"># DHCP Server Configuration file.</span><br><span class="line">#   see /usr/share/doc/dhcp-server/dhcpd.conf.example#这个是dhcpd的模版，参数需要去里面找</span><br><span class="line">#   see dhcpd.conf(5) man page</span><br></pre></td></tr></table></figure><p>2.1：先熟悉一下自己vmare的网络环境，因为这个服务器和网络的关系特别大，就是网络里面的一种协议，所以熟悉提前熟悉网络环境很重要</p><p>2.2：上面的实验环境中说过了服务端和客户端都是主机模式，所以先设置，都是在设置里面进行设置，Windows客户端也是以此类推</p><p>了主机模式之后，将Vmware的主机模式自动分配DHCP功能关闭，不然会影响实验的成功性，子网IP和子网掩码一定要记住，最好配置和物理机一个网段，不然ssh可能连不上去，后面按照上面的网段来进行配置</p><p>2.4：先配置服务端的网卡，也就是openEuler系统的网卡，配置完了之后重启网卡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# vi /etc/sysconfig/network-scripts/ifcfg-ens33</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">PROXY_METHOD=none</span><br><span class="line">BROWSER_ONLY=no</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">DEFROUTE=yes</span><br><span class="line">IPV4_FAILURE_FATAL=no</span><br><span class="line">IPV6INIT=yes</span><br><span class="line">IPV6_AUTOCONF=yes</span><br><span class="line">IPV6_DEFROUTE=yes</span><br><span class="line">IPV6_FAILURE_FATAL=no</span><br><span class="line">IPV6_ADDR_GEN_MODE=eui64</span><br><span class="line">NAME=ens33</span><br><span class="line">UUID=bf8451d5-d52c-4a40-8c46-1bfe23e1dd8f</span><br><span class="line">DEVICE=ens33</span><br><span class="line">ONBOOT=yes</span><br><span class="line">IPADDR=10.203.0.3</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GATEWAY=10.203.0.1</span><br><span class="line">[root@localhost ~]# nmcli c reload ens33</span><br><span class="line">[root@localhost ~]# nmcli c up ens33</span><br><span class="line">连接已成功激活（D-Bus 活动路径：/org/freedesktop/NetworkManager/ActiveConnection/3）</span><br></pre></td></tr></table></figure><p>2.5：然后配置客户端的网卡，也就是WindowsServer2016的网卡，设置为DHCP模式</p><p>2.6：配置完了之后可以发现WindowsServer2016出现了169.254.230.193的ip，这个就说明我们可以开始搭建dhcp服务给这个客户端分配ip地址了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;ipconfig</span><br><span class="line">Windows IP 配置</span><br><span class="line">以太网适配器 Ethernet0:</span><br><span class="line">   连接特定的 DNS 后缀 . . . . . . . :</span><br><span class="line">   本地链接 IPv6 地址. . . . . . . . : fe80::adaa:99c3:30ce:e6c1%3</span><br><span class="line">   自动配置 IPv4 地址  . . . . . . . : 169.254.230.193</span><br><span class="line">   子网掩码  . . . . . . . . . . . . : 255.255.0.0</span><br><span class="line">   默认网关. . . . . . . . . . . . . :</span><br></pre></td></tr></table></figure><p>3.1：再来配置dhcp，需要去模版文件里面找，模版文件的提示是在主配置文件里面，只需要47-55行，这个是dhcpd服务器最主要的一部分</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost dhcp]# cat /usr/share/doc/dhcp-server/dhcpd.conf.exampl</span><br><span class="line">subnet 10.5.5.0 netmask 255.255.255.224 &#123;#作用域，ip和子网掩码</span><br><span class="line">range 10.5.5.26 10.5.5.30;#IP地址池</span><br><span class="line">option domain-name-servers ns1.internal.example.org;#服务器IP</span><br><span class="line">option domain-name &quot;internal.example.org&quot;;#域名</span><br><span class="line">option routers 10.5.5.1;#网关地址</span><br><span class="line">option broadcast-address 10.5.5.31;#客户端的广播地址</span><br><span class="line">default-lease-time 600;#默认超时时间</span><br><span class="line">max-lease-time 7200;#最大超时时间</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>3.2：对其进行修改，修改成适合自己网络环境的DHCP配置，先把上面这些复制粘贴到dhcpd.conf里面，原有的一些提醒内容可以备份或删除</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost dhcp]# pwd</span><br><span class="line">/etc/dhcp</span><br><span class="line">[root@localhost dhcp]# cp -a dhcpd.conf dhcpd.conf.bak</span><br><span class="line">[root@localhost dhcp]# vi dhcpd.conf</span><br><span class="line">subnet 10.203.0.0 netmask 255.255.255.224 &#123;</span><br><span class="line">  range 10.203.0.26 10.203.0.30;</span><br><span class="line">  option domain-name-servers 10.203.0.3;</span><br><span class="line">  option domain-name &quot;test.com&quot;;</span><br><span class="line">  option routers 10.203.0.1;</span><br><span class="line">  option broadcast-address 10.203.0.31;</span><br><span class="line">  default-lease-time 600;</span><br><span class="line">  max-lease-time 7200;</span><br><span class="line">&#125;</span><br><span class="line">[root@localhost dhcp]# systemctl restart dhcp</span><br></pre></td></tr></table></figure><p>3.3：测试客户端是否可以获取到dhcp，可以显示出test.com这些dhcp服务器的信息就可以证明实验成功了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;ipconfig /all</span><br><span class="line"></span><br><span class="line">以太网适配器 Ethernet0:</span><br><span class="line"></span><br><span class="line">   连接特定的 DNS 后缀 . . . . . . . : test.com</span><br><span class="line">   描述. . . . . . . . . . . . . . . : Intel(R) 82574L Gigabit Network Connection</span><br><span class="line">   物理地址. . . . . . . . . . . . . : 00-0C-29-0F-99-8C</span><br><span class="line">   DHCP 已启用 . . . . . . . . . . . : 是</span><br><span class="line">   自动配置已启用. . . . . . . . . . : 是</span><br><span class="line">   本地链接 IPv6 地址. . . . . . . . : fe80::adaa:99c3:30ce:e6c1%3(首选)</span><br><span class="line">   IPv4 地址 . . . . . . . . . . . . : 10.203.0.26(首选)</span><br><span class="line">   子网掩码  . . . . . . . . . . . . : 255.255.255.224</span><br><span class="line">   获得租约的时间  . . . . . . . . . : 2024年7月8日 15:33:15</span><br><span class="line">   租约过期的时间  . . . . . . . . . : 2024年7月8日 15:42:24</span><br><span class="line">   默认网关. . . . . . . . . . . . . : 10.203.0.1</span><br><span class="line">   DHCP 服务器 . . . . . . . . . . . : 10.203.0.3</span><br><span class="line">   DHCPv6 IAID . . . . . . . . . . . : 50334761</span><br><span class="line">   DHCPv6 客户端 DUID  . . . . . . . : 00-01-00-01-2D-E4-A1-C3-00-0C-29-0F-99-8C</span><br><span class="line">   DNS 服务器  . . . . . . . . . . . : 10.203.0.3</span><br><span class="line">   TCPIP 上的 NetBIOS  . . . . . . . : 已启用</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h4 id=&quot;一、服务器介绍&quot;&gt;&lt;a href=&quot;#一、服务器介绍&quot; class=&quot;headerlink&quot; title=&quot;一、服务器介绍&quot;&gt;&lt;/a&gt;一、服务器介绍&lt;/h4&gt;&lt;p&gt;动态主机配置协议 DHCP（Dynamic Host Configuration Protocol，动态主机配置协议） 是 RFC 1541（已被 RFC 2131 取代）定义的标准协议，该协议允许服务器向客户端动态分配 IP 地址和配置信息。&lt;br&gt;DHCP协议支持C&amp;#x2F;S（客户端&amp;#x2F;服务器）结构，主要分为两部分：&lt;br&gt;1、DHCP客户端：通常为网络中的PC、打印机等终端设备，使用从DHCP服务器分配下来的IP信息，包括IP地址、DNS等。&lt;br&gt;2、DHCP服务器：所有的IP网络设定信息都由DHCP服务器集中管理，并处理客户端的DHCP请求。&lt;br&gt;DHCP采用UDP作为传输协议，客户端发送消息到DHCP服务器的的67号端口，服务器返回消息给客户端的68号端口。&lt;/p&gt;
&lt;h4 id=&quot;二、实验环境&quot;&gt;&lt;a href=&quot;#二、实验环境&quot; class=&quot;headerlink&quot; title=&quot;二、实验环境&quot;&gt;&lt;/a&gt;二、实验环境&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;操作系统&lt;/th&gt;
&lt;th&gt;网络模式&lt;/th&gt;
&lt;th&gt;系统网络模式&lt;/th&gt;
&lt;th&gt;IP&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;服务端:openEuler&lt;/td&gt;
&lt;td&gt;主机模式&lt;/td&gt;
&lt;td&gt;Static&lt;/td&gt;
&lt;td&gt;10.203.0.3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;客户端:Windows Server 2016&lt;/td&gt;
&lt;td&gt;主机模式&lt;/td&gt;
&lt;td&gt;DHCP&lt;/td&gt;
&lt;td&gt;DHCP分配&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h4 id=&quot;三、实验内容&quot;&gt;&lt;a href=&quot;#三、实验内容&quot; class=&quot;headerlink&quot; title=&quot;三、实验内容&quot;&gt;&lt;/a&gt;三、实验内容&lt;/h4&gt;&lt;p&gt;1.下载DHCP服务&lt;/p&gt;
&lt;p&gt;2.网络环境的配置&lt;/p&gt;
&lt;p&gt;3.DHCP服务的配置&lt;/p&gt;
&lt;h4 id=&quot;四、实验步骤&quot;&gt;&lt;a href=&quot;#四、实验步骤&quot; class=&quot;headerlink&quot; title=&quot;四、实验步骤&quot;&gt;&lt;/a&gt;四、实验步骤&lt;/h4&gt;&lt;p&gt;1.1：下载DHCP服务&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>Hello!</title>
    <link href="https://luistin.github.io/2025/01/16/Hello/"/>
    <id>https://luistin.github.io/2025/01/16/Hello/</id>
    <published>2025-01-16T14:43:08.000Z</published>
    <updated>2025-02-16T08:38:57.490Z</updated>
    
    <content type="html"><![CDATA[<p>您好，我是Luisitn，我是一位网络安全技术、运维技术爱好者， 很高兴来到我的博客，大家一起交流学习，谢谢！</p><p>Hello, I’m Luisitn. I’m an enthusiast of network security technology and operation and maintenance technology. I’m very glad to welcome you to my blog. Let’s communicate and learn from each other. Thank you!</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;您好，我是Luisitn，我是一位网络安全技术、运维技术爱好者， 很高兴来到我的博客，大家一起交流学习，谢谢！&lt;/p&gt;
&lt;p&gt;Hello, I’m Luisitn. I’m an enthusiast of network security technology and operation and maintenance technology. I’m very glad to welcome you to my blog. Let’s communicate and learn from each other. Thank you!&lt;/p&gt;
</summary>
    
    
    
    
  </entry>
  
</feed>
